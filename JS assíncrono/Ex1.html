<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ex 1</title>
</head>
<body>
    <!--Crie uma função que retorne promise que se resolve após 2 segundos com a string
    Tempo esgotado. Usar o método setTimeout.-->

    <!--Use Fetch API para fazer uma requisição GET para 'https
    ://jsonplaceholder.typicode.com/users' e imprima a resposta
    no console-->

    <!--Escreva uma função assíncrona que faz uma requisição
    GET para 'https
    ://jsonplaceholder.typicode.com/posts', envie o seguinte objeto
    {title: 'Meu post' body: 'Este é  o corpo do meu post', user id 1.
    Imprima a resposta.}-->
</body>
</html>
<script>
    function esperarDoisSegundos() {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve('Tempo esgotado');
            }, 2000);
        });
    }

    fetch('https://jsonplaceholder.typicode.com/users')
    .then(resposta1 => resposta1.json())
    .then(dados => console.log(dados))
    .catch(erro => console.log('Erro', erro))

    async function post() {
        const novoPost = {
            title: 'Meu Post',
            body: 'Este é o body do meu post',
            userId: 1
        };

        try {
            const resposta = await fetch('https://jsonplaceholder.typicode.com/posts', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(novoPost)
            });
            const dados = await resposta.json();
            console.log(dados);

            const respostaGet = await fetch('https://jsonplaceholder.typicode.com/posts');
                const dadosGet = await respostaGet.json();
                console.log('Resposta do GET:', dadosGet);
        } catch (erro) {
            console.log('Erro', erro);
        }
    }

    // Chama a função assíncrona
    post();

    async function get(){
        const resposta = await fetch('https://jsonplaceholder.typicode.com/posts')
        const data = await resposta.json()
        return data[0].title;
    }

    function promiseManipulada(){
        return new Promise((resolve, reject)=>{
            setTimeout(()=>{
                resolve (10);
            }, 3000)
        })
    }
    promiseManipulada()
    .then(resposta =>{
        console.log('Resolve', resposta)
    })
    .catch(erro =>{
        console.log('Erro', erro)
    })
    .finally(()=>{
        console.log('Promise manipulada')
    })
</script>